{"ast":null,"code":"import{SET_CURRENT_USER,USER_LOADING,GET_ERRORS}from\"./types\";import axios from\"axios\";import jwt_decode from\"jwt-decode\";import setAuthToken from\"../utils/setAuthToken\";import{createBrowserHistory}from'history';var history=createBrowserHistory();export var registerUser=function registerUser(userData){return function(dispatch){axios.post(\"http://localhost:3000/api/users/register\",userData).then(function(){console.log(\"success\");history.push(\"/login\");})// re-direct to login on successful register\n.catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};// Login - get user token\nexport var loginUser=function loginUser(userData){return function(dispatch){axios.post(\"http://localhost:3000/api/users/login\",userData).then(function(res){// Save to localStorage\n// Set token to localStorage\nvar token=res.data.token;localStorage.setItem(\"jwtToken\",token);// Set token to Auth header\nsetAuthToken(token);// Decode token to get user data\nvar decoded=jwt_decode(token);// Set current user\ndispatch(setCurrentUser(decoded));history.push(\"/dashboard\");window.location.href=\"./dashboard\";}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err});});};};export var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};export var setUserLoading=function setUserLoading(){return{type:USER_LOADING};};export var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem(\"jwtToken\");setAuthToken(false);dispatch(setCurrentUser({}));window.location.href=\"./login\";};};","map":{"version":3,"sources":["/Users/omoruyiohuoba/Desktop/APPS/WEB DEVELOPMENT/BLOOMBANK-BANKING-WEB-APP/client/src/actions/authActions.js"],"names":["SET_CURRENT_USER","USER_LOADING","GET_ERRORS","axios","jwt_decode","setAuthToken","createBrowserHistory","history","registerUser","userData","dispatch","post","then","console","log","push","catch","err","type","payload","loginUser","res","token","data","localStorage","setItem","decoded","setCurrentUser","window","location","href","setUserLoading","logoutUser","removeItem"],"mappings":"AAAA,OAAQA,gBAAR,CAA0BC,YAA1B,CAAwCC,UAAxC,KAAyD,SAAzD,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,OAASC,oBAAT,KAAqC,SAArC,CACA,GAAMC,CAAAA,OAAO,CAAGD,oBAAoB,EAApC,CAKA,MAAO,IAAME,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,QAAD,QAAc,UAAAC,QAAQ,CAAI,CAElDP,KAAK,CAACQ,IAAN,CAAW,0CAAX,CAAuDF,QAAvD,EACGG,IADH,CACQ,UAAM,CACVC,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAP,OAAO,CAACQ,IAAR,CAAa,QAAb,EACD,CAJH,CAIK;AAJL,CAKGC,KALH,CAKS,SAAAC,GAAG,QACRP,CAAAA,QAAQ,CAAC,CACPQ,IAAI,CAAEhB,UADC,CAEPiB,OAAO,CAAEF,GAFF,CAAD,CADA,EALZ,EAWD,CAbyB,EAArB,CAeL;AACA,MAAO,IAAMG,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAX,QAAQ,QAAI,UAAAC,QAAQ,CAAI,CAC/CP,KAAK,CAACQ,IAAN,CAAW,uCAAX,CAAoDF,QAApD,EACGG,IADH,CACQ,SAAAS,GAAG,CAAI,CACX;AACN;AAFiB,GAGHC,CAAAA,KAHG,CAGOD,GAAG,CAACE,IAHX,CAGHD,KAHG,CAIXE,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCH,KAAjC,EACA;AACAjB,YAAY,CAACiB,KAAD,CAAZ,CACA;AACA,GAAMI,CAAAA,OAAO,CAAGtB,UAAU,CAACkB,KAAD,CAA1B,CACA;AACAZ,QAAQ,CAACiB,cAAc,CAACD,OAAD,CAAf,CAAR,CACAnB,OAAO,CAACQ,IAAR,CAAa,YAAb,EACAa,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,aAAvB,CAA4C,CAbhD,EAcGd,KAdH,CAcS,SAAAC,GAAG,QACRP,CAAAA,QAAQ,CAAC,CACPQ,IAAI,CAAEhB,UADC,CAEPiB,OAAO,CAAEF,GAFF,CAAD,CADA,EAdZ,EAoBD,CArBgC,EAA1B,CAuBT,MAAO,IAAMU,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAD,OAAO,CAAI,CACjC,MAAO,CACHR,IAAI,CAAElB,gBADH,CAEHmB,OAAO,CAAEO,OAFN,CAAP,CAIH,CALE,CAON,MAAO,IAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC7B,MAAO,CACHb,IAAI,CAAEjB,YADH,CAAP,CAGH,CAJG,CAMR,MAAO,IAAM+B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAM,UAAAtB,QAAQ,CAAI,CACpCc,YAAY,CAACS,UAAb,CAAwB,UAAxB,EACA5B,YAAY,CAAC,KAAD,CAAZ,CACAK,QAAQ,CAACiB,cAAc,CAAC,EAAD,CAAf,CAAR,CACAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,SAAvB,CAEH,CANqB,EAAnB","sourcesContent":["import {SET_CURRENT_USER, USER_LOADING, GET_ERRORS} from \"./types\";\nimport axios from \"axios\";\nimport jwt_decode from \"jwt-decode\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport { createBrowserHistory } from 'history';\nconst history = createBrowserHistory();\n\n\n\n\nexport const registerUser = (userData) => dispatch => {\n\n    axios.post(\"http://localhost:3000/api/users/register\", userData)\n      .then(() => {\n        console.log(\"success\");\n        history.push(\"/login\");\n      }) // re-direct to login on successful register\n      .catch(err =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        })\n      );\n  };\n\n  // Login - get user token\n  export const loginUser = userData => dispatch => {\n    axios.post(\"http://localhost:3000/api/users/login\", userData)\n      .then(res => {\n        // Save to localStorage\n  // Set token to localStorage\n        const { token } = res.data;\n        localStorage.setItem(\"jwtToken\", token);\n        // Set token to Auth header\n        setAuthToken(token);\n        // Decode token to get user data\n        const decoded = jwt_decode(token);\n        // Set current user\n        dispatch(setCurrentUser(decoded));\n        history.push(\"/dashboard\");\n        window.location.href = \"./dashboard\";      })\n      .catch(err =>\n        dispatch({\n          type: GET_ERRORS,\n          payload: err\n        })\n      );\n  };\n\nexport const setCurrentUser = decoded => {\n        return {\n            type: SET_CURRENT_USER,\n            payload: decoded\n        }\n    };\n\n export const setUserLoading = () => {\n        return {\n            type: USER_LOADING\n        };\n    };\n\nexport const logoutUser = () => dispatch => {\n        localStorage.removeItem(\"jwtToken\");\n        setAuthToken(false);\n        dispatch(setCurrentUser({}))\n        window.location.href = \"./login\";\n        \n    };\n\n\n"]},"metadata":{},"sourceType":"module"}